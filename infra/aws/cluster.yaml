# ──────────────────────────────────────────────
# ShelfWatch — EKS Cluster Config (eksctl)
# ──────────────────────────────────────────────
# Usage: eksctl create cluster -f infra/aws/cluster.yaml
# Cost:  EKS control plane $0.10/hr + m7i-flex.large ~$0.08/hr
# ──────────────────────────────────────────────

apiVersion: eksctl.io/v1alpha5
kind: ClusterConfig

metadata:
  name: shelfwatch
  region: us-east-1
  version: "1.31"

managedNodeGroups:
  - name: spot-inference-nodes
    instanceTypes: ["m7i-flex.large", "c7i-flex.large", "t3.small"]
    spot: true
    desiredCapacity: 2
    minSize: 1
    maxSize: 4
    volumeSize: 30
    volumeType: gp3
    labels:
      role: inference
    tags:
      project: shelfwatch
      environment: production
    iam:
      withAddonPolicies:
        autoScaler: true
        cloudWatch: true
